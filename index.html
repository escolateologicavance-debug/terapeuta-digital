<!DOCTYPE html>
<html lang="pt-br">
<head>
<link rel="manifest" href="manifest.json?v=6">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terapeuta Digital - Gilberto Moreira</title>
<style>
:root { --fundo: #f8f9fa; --azul: #0b3c5d; --verde: #16a085; --laranja: #e67e22; --vermelho: #c0392b; }
body { font-family: 'Segoe UI', sans-serif; background: var(--fundo); text-align: center; padding: 10px; margin: 0; }
.container { max-width: 450px; margin: 15px auto; background: #fff; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); position: relative; min-height: 750px; display: flex; flex-direction: column; }

.topo { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; text-align: left; }
.avatar { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--verde); overflow: hidden; background: #ddd; flex-shrink: 0; }
.avatar img { width: 100%; height: 100%; object-fit: cover; }

.medidor-box { position: relative; width: 260px; height: 130px; margin: 20px auto; background: conic-gradient(from 270deg at 50% 100%, #e74c3c 0%, #f1c40f 45%, #2ecc71 100%); border-radius: 130px 130px 0 0; border: 5px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.ponteiro-container { position: absolute; bottom: 0; left: 50%; width: 0; height: 0; }
.ponteiro { position: absolute; bottom: 0; left: 0; width: 100px; height: 4px; background: #333; transform-origin: left center; transform: rotate(-180deg); transition: transform 2s cubic-bezier(0.17, 0.67, 0.83, 0.67); z-index: 10; border-radius: 4px; }

.menu-grid { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px; }
button { width: 100%; padding: 16px; font-size: 1.1em; font-weight: bold; border-radius: 15px; border: none; background: var(--azul); color: #fff; cursor: pointer; }
.btn-crise { background: #f8f9fa; color: var(--azul); border: 1px solid #ddd; text-align: left; padding-left: 15px; font-size: 0.95em; }

.caixa-suporte { text-align: left; background: #fdfaf5; padding: 20px; border-radius: 15px; border-left: 6px solid var(--laranja); margin-top: 15px; display: none; line-height: 1.6; }
.texto-biblico { display: block; margin-top: 12px; font-weight: bold; color: var(--azul); border-top: 1px solid #eee; padding-top: 10px; font-style: italic; font-size: 0.9em; }

.rodape { margin-top: auto; padding-top: 20px; border-top: 1px solid #eee; font-size: 0.75em; color: #7f8c8d; }
.alerta-vermelho { color: var(--vermelho); font-weight: bold; margin-bottom: 8px; display: block; }

#plano-autoavaliacao, #plano-resultado, #plano-conteudo, #plano-crises { display: none; }
</style>
</head>
<body>

<div class="container">
  <div class="topo">
    <div class="avatar"><img src="avatar.jpg" onerror="this.src='https://cdn-icons-png.flaticon.com/512/149/149071.png'"></div>
    <div style="flex:1"><h2>Terapeuta Digital</h2><small>Qualificação do Estar</small></div>
  </div>

  <div id="plano-recepcao">
    <div class="medidor-box"></div>
    <p style="color:var(--laranja); font-weight:bold; font-size:1.3em; margin: 30px 0;">Como está o seu nível emocional agora?</p>
    <button onclick="irPara('plano-autoavaliacao')">Simulador Emocional</button>
  </div>

  <div id="plano-autoavaliacao">
    <h3 style="color:var(--verde)">Autoavaliação (0 a 10)</h3>
    <div id="questoes"></div>
    <button onclick="verResultado()">Ver Resultado</button>
  </div>

  <div id="plano-resultado">
    <div class="medidor-box"><div class="ponteiro-container"><div class="ponteiro" id="ptr-vivo"></div></div></div>
    <div style="font-size:4.5em; color:#f1c40f; font-weight:bold; text-shadow:2px 2px 4px rgba(0,0,0,0.2)" id="v-sc">000</div>
    <div style="font-weight:bold; color:#7f8c8d; margin-bottom:20px">Nota MC: <span id="v-mc">0.0</span></div>
    <button onclick="irPara('plano-conteudo')">Acessar Conteúdo</button>
  </div>

  <div id="plano-conteudo">
    <div class="menu-grid">
      <button style="background:var(--laranja)" onclick="irPara('plano-crises')">Suporte Emocional</button>
      <button style="background:var(--verde)" onclick="mostrarConselho()">Conselho do Dia</button>
      <button style="background:var(--vermelho)" onclick="window.location.href='https://wa.me/5566999390073'">S.O.S / SINCRO</button>
    </div>
    <div id="cx-conselho" class="caixa-suporte"></div>
    <button style="background:#95a5a6; margin-top:15px; font-size:0.9em; padding:10px" onclick="irPara('plano-resultado')">Voltar ao Score</button>
  </div>

  <div id="plano-crises">
    <h3 style="color:var(--azul)">Selecione o Apoio:</h3>
    <div class="menu-grid" style="max-height: 400px; overflow-y: auto; padding:5px;">
      <button class="btn-crise" onclick="msg('faltaFe')">Falta de Fé</button>
      <button class="btn-crise" onclick="msg('indecisao')">Indecisão</button>
      <button class="btn-crise" onclick="msg('paz')">Sem Paz</button>
      <button class="btn-crise" onclick="msg('desilusao')">Desilusão</button>
      <button class="btn-crise" onclick="msg('proposito')">Sem Propósitos</button>
      <button class="btn-crise" onclick="msg('separacao')">Separação Conjugal</button>
      <button class="btn-crise" onclick="msg('ansiedade')">Ansiedade</button>
      <button class="btn-crise" onclick="msg('luto')">Luto</button>
      <button class="btn-crise" onclick="msg('aborto')">Aborto</button>
      <button class="btn-crise" onclick="msg('magoa')">Mágoa</button>
    </div>
    <div id="cx-suporte" class="caixa-suporte"></div>
    <button style="background:#95a5a6; margin-top:15px" onclick="irPara('plano-conteudo')">Voltar ao Menu</button>
  </div>

  <div class="rodape">
    <span class="alerta-vermelho">Alerta: Não substitui psiquiatria. Não suspenda remédios.</span>
    <b>Gilberto Moreira — Psicanalista | CBO 2515-50</b><br>
    Método SINCRO - Itanhangá-MT
  </div>
</div>

<script>
const suporte = {
  faltaFe: { t: "Equilíbrio em Meio à Crise: A instabilidade emocional é como um mar agitado. Retome a calma consciente para que a paz volte a reinar no seu Estar.", b: "Mateus 8:26", v: "E disse-lhes: Por que é pequena a vossa fé? E, levantando-se, repreendeu os ventos e o mar, e fez-se grande bonança." },
  indecisao: { t: "Ordem Mental: Entregue o controle ao propósito maior para encontrar o caminho correto quando a lógica limitada falhar.", b: "Provérbios 3:5", v: "Confia no Senhor de todo o teu coração, e não te estribes no teu próprio entendimento." },
  paz: { t: "Qualificação da Mente: A paz é um estado que protege seus pensamentos acima de qualquer circunstância externa.", b: "Filipenses 4:7", v: "E a paz de Deus, que excede todo o entendimento, guardará os vossos corações e os vossos pensamentos in Cristo Jesus." },
  desilusao: { t: "Transformação do Estar: Frustrações cooperam para o seu crescimento sistêmico e amadurecimento.", b: "Romanos 8:28", v: "E sabemos que todas as coisas contribuem para o bem daqueles que amam a Deus, daqueles que são chamados segundo o seu propósito." },
  proposito: { t: "Destino Assistido: Existem planos de paz desenhados para o seu Estar, visando um futuro de plena esperança.", b: "Jeremias 29:11", v: "Porque eu sei os pensamentos que tenho para convosco, diz o Senhor, pensamentos de paz, e não de mal, para vos dar o fim que desejais." },
  separacao: { t: "Reorganização Pessoal: Foque em restabelecer a ordem no seu Estar individual para um novo recomeço equilibrado.", b: "Gênesis 2:24", v: "E disse: Por isso o homem deixará o seu pai e a sua mãe, e se unirá à sua mulher, e serão uma só carne." },
  ansiedade: { t: "Foco no Presente: Qualifique seu Estar agora, lidando apenas com as demandas reais do dia de hoje.", b: "Mateus 6.34", v: "Não vos inquieteis, pois, pelo dia de amanhã, porque o dia de amanhã cuidará de si mesmo. Basta a cada dia o seu mal." },
  luto: { t: "Apoio Sincroclínico: Permita-se o acolhimento para que seu Estar encontre o consolo necessário para prosseguir.", b: "Salmos 34:1, 4", v: "O Senhor está perto dos que têm o coração quebrantado e salva os de espírito abatido." },
  aborto: { t: "Amparo na Perda: Encontre conforto na verdade de que toda vida é conhecida e protegida pelo Criador desde o início.", b: "Jeremias 1:5", v: "Antes que te formasse no ventre, te conheci; e, antes que saísses da madre, te santifiquei." },
  magoa: { t: "Liberação de Cargas: Substitua o foco na ofensa pela utilidade e pela prática do bem para restaurar sua paz.", b: "Efesios 4:27-28", v: "E não deis lugar ao diabo... antes trabalhe, fazendo com as mãos o que é bom." }
};

const frasesConselho = [
  '"A vida é 10% o que acontece com você e 90% como você reage a isso." - Charles R. Swindoll',
  '"O sucesso não é final, o fracasso não é fatal: é a coragem de continuar." - Winston Churchill',
  '"Você não pode mudar o vento, mas pode ajustar as velas do seu barco." - Franklin D. Roosevelt'
];

function irPara(id) {
  ['plano-recepcao','plano-autoavaliacao','plano-resultado','plano-conteudo','plano-crises'].forEach(p => document.getElementById(p).style.display='none');
  document.getElementById(id).style.display='block';
}

function msg(c) {
  const d = document.getElementById('cx-suporte');
  d.style.display = 'block';
  d.innerHTML = `<strong>Orientação Clínica:</strong><br>${suporte[c].t}<br><span class="texto-biblico">"${suporte[c].v}"<br>(${suporte[c].b})</span>`;
}

function mostrarConselho() {
  const d = document.getElementById('cx-conselho');
  const r = Math.floor(Math.random() * frasesConselho.length);
  d.style.display = 'block';
  d.innerHTML = `<strong>Conselho do Dia:</strong><br>${frasesConselho[r]}`;
}

function init() {
  const qs = ["Q1 – Org. Ambiente", "Q2 – Agenda", "Q3 – Problemas", "Q4 – Pausa", "Q5 – Ansiedade", "Q6 – Paz Interna", "Q .7- Perdão", "Q8 – Humor"];
  const container = document.getElementById('questoes');
  qs.forEach(q => {
    container.innerHTML += `<div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee;"><span>${q}:</span><input type="number" class="nota" min="0" max="10" value="0" oninput="if(value>10)value=10;if(value<0)value=0;" style="width:45px;text-align:center;border-radius:5px;border:1px solid #ccc;"></div>`;
  });
}

function verResultado() {
  let s = 0; const ns = document.querySelectorAll('.nota');
  for(let n of ns) { s += parseFloat(n.value || 0); }
  const sc = Math.round(s * 12.5);
  irPara('plano-resultado');
  document.getElementById('v-sc').innerText = sc;
  document.getElementById('v-mc').innerText = (sc/100).toFixed(1);
  const ang = -180 + (sc/1000 * 180);
  setTimeout(() => { document.getElementById('ptr-vivo').style.transform = `rotate(${ang}deg)`; }, 200);
}

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js')
    .then(() => console.log("SincroApp: Ativado"))
    .catch(err => console.log("Erro sw:", err));
}

init();
</script>
</body>
</html>
